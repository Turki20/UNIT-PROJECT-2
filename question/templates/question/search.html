{% extends "generator/base.html" %}

{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/index.css' %}">
{% endblock style %}


{% block content %}


<div id="main">
    <div class="header">
        <h1>DevCommunity</h1>
    </div>

    <div class="search_content">
        <form action="{% url 'question:search_view' %}" method="post">

            <div>
                <input type="text" name="search" value="{{last_search}}" placeholder="Enter a question">
                <button type="submit">Search</button>
            </div>
            {% csrf_token %}
            <div>
                <label for="Tag">
                    Tag
                </label>
                <select name="tag" id="Tag">
                    <option value="all">all</option>
                    {% for tag in all_tags %}
                    <option value="{{tag.name}}">{{tag.name}}</option>
                    {% endfor %}
                    <option value="Python">Python</option>
                    <option value="">test</option>
                </select>
            </div>
        </form>

        <div class="search_container">
            <div>
                <h1>Result</h1>
                <p>number of result: {{count}}</p>
            </div>
            <div class="grid_container">
                {% for obj in final_objects %}
                <a href="{% url 'question:question_detail_view' obj.question.id %}" class="card-link">
                    <div class="card">
                        <h2>
                            {{obj.question.title}}
                        </h2>
                        <div>
                            {% for tag in obj.tags %}
                                <div class="a">{{tag.name}}</div>
                            {% endfor %}
                        </div>
                        <em>{{obj.question.created_at}}</em>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
    </div>

    <footer>
    <p>Turki Ahmed</p>
  </footer>
</div>
{% block js %}
<script>
    $(document).ready(function() {
        $('#Tag').select2({
            placeholder: "Select a Tag",
            allowClear: true
        });
    });
</script>
{% endblock js %}

{% endblock content %}